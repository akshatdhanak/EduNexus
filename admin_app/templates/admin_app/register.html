{% extends "layout.html" %}
{% block title %}Register{% endblock %}
{% block container %}
<div
  class="card"
  style="max-width: 880px; margin: 24px auto; padding: 0; overflow: visible"
>
  <div class="card-body">
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 18px;
      "
    >
      <div>
        <h1 style="margin: 0; font-size: 22px">Create Account</h1>
        <p class="subtitle" style="margin: 4px 0 0">
          Add a new user to the system
        </p>
      </div>
      <div>
        <a href="{% url 'admin_app:admin_dashboard' %}" class="nav-pill"
          >Back</a
        >
      </div>
    </div>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
      {% endif %}
      {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {{ form.non_field_errors|striptags }}
      </div>
      {% endif %}

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Full Name *</label>
            {{ form.name }} {% if form.name.errors %}
            <div class="error-text">{{ form.name.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Roll Number *</label>
            {{ form.roll_number }} {% if form.roll_number.errors %}
            <div class="error-text">
              {{ form.roll_number.errors|striptags }}
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Username *</label>
            {{ form.username }} {% if form.username.errors %}
            <div class="error-text">{{ form.username.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Email *</label>
            {{ form.email }} {% if form.email.errors %}
            <div class="error-text">{{ form.email.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Password *</label>
            {{ form.password }} {% if form.password.help_text %}<small
              class="text-muted"
              >{{ form.password.help_text }}</small
            >{% endif %}
            {% if form.password.errors %}
            <div class="error-text">{{ form.password.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Phone *</label>
            {{ form.phone }} {% if form.phone.errors %}
            <div class="error-text">{{ form.phone.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Profile Image</label>
            {{ form.image }} {% if form.image.errors %}
            <div class="error-text">{{ form.image.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Date of Birth</label>
            {{ form.date_of_birth }} {% if form.date_of_birth.errors %}
            <div class="error-text">
              {{ form.date_of_birth.errors|striptags }}
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label>Division</label>
            {{ form.division }} {% if form.division.errors %}
            <div class="error-text">{{ form.division.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label>Batch</label>
            {{ form.batch }} {% if form.batch.errors %}
            <div class="error-text">{{ form.batch.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label>Semester</label>
            {{ form.semester }} {% if form.semester.errors %}
            <div class="error-text">{{ form.semester.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Department / Program *</label>
            {{ form.degree_program }} {% if form.degree_program.errors %}
            <div class="error-text">
              {{ form.degree_program.errors|striptags }}
            </div>
            {% endif %}
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Graduation Date</label>
            {{ form.graduation_date }} {% if form.graduation_date.errors %}
            <div class="error-text">
              {{ form.graduation_date.errors|striptags }}
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <div
        style="
          display: flex;
          gap: 12px;
          justify-content: flex-end;
          margin-top: 8px;
        "
      >
        <button type="submit" class="btn btn-primary">Register</button>
        <a href="{% url 'admin_app:student_info' %}" class="btn btn-secondary"
          >Cancel</a
        >
      </div>
    </form>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const divisionSelect = document.getElementById("id_division");
    const batchSelect = document.getElementById("id_batch");
    const batchSuffixes = ["1", "2", "3", "4"];

    function updateBatchOptions() {
      if (!divisionSelect || !batchSelect) {
        return;
      }

      const division = divisionSelect.value;
      const currentValue = batchSelect.value;

      batchSelect.innerHTML = "";
      const placeholder = document.createElement("option");
      placeholder.value = "";
      placeholder.textContent = "Select batch";
      batchSelect.appendChild(placeholder);

      if (!division) {
        batchSelect.value = "";
        return;
      }

      batchSuffixes.forEach(function (suffix) {
        const option = document.createElement("option");
        option.value = `${division}${suffix}`;
        option.textContent = `${division}${suffix}`;
        batchSelect.appendChild(option);
      });

      if (currentValue) {
        batchSelect.value = currentValue;
      }
    }

    if (divisionSelect && batchSelect) {
      divisionSelect.addEventListener("change", updateBatchOptions);
      updateBatchOptions();
    }
  });
</script>
{% endblock %}
{% block style %}
:root { --surface: #ffffff; --border: #e5e7eb;
--text: #1f2937; --muted: #6b7280; --accent: #2563eb; --accent-strong: #1d4ed8;
} body { background: #f5f6f8; color: var(--text); font-family: 'Inter',
-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; } .register-wrapper {
max-width: 760px; margin: 80px auto; padding: 0 16px; } .register-card {
background: var(--surface); border: 1px solid var(--border); border-radius:
14px; box-shadow: 0 12px 30px rgba(0,0,0,0.06); padding: 32px; }
.register-header h1 { font-size: 28px; font-weight: 700; margin: 0 0 6px 0; }
.register-header p { margin: 0 0 24px 0; color: var(--muted); font-size: 15px; }
.register-form { display: flex; flex-direction: column; gap: 18px; } .form-row {
display: flex; flex-direction: column; gap: 6px; } .form-row label {
font-weight: 600; font-size: 14px; color: var(--text); } .form-control-wrap
input, .form-control-wrap select, .form-control-wrap textarea { width: 100%;
padding: 12px 14px; border: 1px solid var(--border); border-radius: 10px;
font-size: 15px; color: var(--text); background: #f9fafb; transition:
border-color 0.2s ease, box-shadow 0.2s ease; } .form-control-wrap input:focus,
.form-control-wrap select:focus, .form-control-wrap textarea:focus { outline:
none; border-color: var(--accent); box-shadow: 0 0 0 4px rgba(37, 99, 235,
0.12); background: #fff; } .checkbox-wrap { display: flex; flex-wrap: wrap; gap:
12px 18px; padding: 8px 0; } .checkbox-wrap input[type="checkbox"] {
margin-right: 8px; width: 16px; height: 16px; } .checkbox-wrap label { display:
inline-flex; align-items: center; gap: 8px; font-weight: 500; font-size: 14px; }
.help-text { margin: 0; color: var(--muted); font-size: 12px; } .error-text {
color: #b91c1c; background: #fef2f2; border: 1px solid #fecaca; border-radius:
8px; padding: 8px 10px; font-size: 13px; } .form-actions { display: flex; gap:
12px; margin-top: 8px; } .btn-primary, .btn-secondary { display: inline-flex;
align-items: center; justify-content: center; padding: 12px 18px; border-radius:
10px; font-weight: 700; font-size: 15px; text-decoration: none; cursor: pointer;
transition: transform 0.1s ease, box-shadow 0.2s ease; } .btn-primary {
background: var(--accent); color: #fff; border: 1px solid var(--accent);
box-shadow: 0 8px 16px rgba(37, 99, 235, 0.24); } .btn-primary:hover {
background: var(--accent-strong); } .btn-secondary { background: #fff; color:
var(--text); border: 1px solid var(--border); } .btn-primary:active,
.btn-secondary:active { transform: translateY(1px); } @media (max-width: 640px)
{ .register-card { padding: 24px; } .form-actions { flex-direction: column; }
.btn-primary, .btn-secondary { width: 100%; } } {% endblock %}
